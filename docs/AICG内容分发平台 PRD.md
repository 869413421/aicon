# AICG内容分发平台PRD文档

## 文档版本记录

| 版本号 | 修订日期 | 修订人 | 修订说明 |
| :--- | :--- | :--- | :--- |
| V1.1 | 2025-11-06 | 清水 | 优化文本解析与编辑模块，解决超长文本处理问题 |
| V1.0 | 2025-11-06 | 清水 | 初稿创建 |

## 1. 产品概述

### 1.1 产品背景与愿景

随着短视频和长视频内容的消费需求持续增长，内容创作者面临着生产效率低下、制作成本高昂的挑战。AIGC（AI生成内容）技术，特别是在视频生成领域，为解决这一问题提供了可能。然而，当前市场上缺乏一个能够完整支持**长视频、全流程自动化生产**的平台。

**AICG内容分发平台**旨在填补这一空白，通过AI技术将文本（尤其是小说、散文等长内容）自动转换为高质量的视频，并提供一键分发的功能，极大降低视频内容的创作门槛和成本。

**产品愿景**：成为全球领先的、以AI驱动的长视频内容创作与分发平台。

### 1.2 产品目标

- **短期目标（V1.0）**：
  - 实现从文本上传到视频生成的全流程核心功能。
  - 支持用户灵活配置和管理AI模型API密钥。
  - 提供基础的内容编辑与视频发布能力。
  - **重点解决超长文本的分批分段处理问题**

- **长期目标（V2.0及以后）**：
  - 引入更多AI模型供应商，提供模型性能对比和推荐。
  - 支持更多视频风格模板和自定义选项。
  - 拓展分发渠道，增加如抖音、微博等平台。
  - 构建内容社区和商业化功能。

### 1.3 目标用户画像

| 用户类型 | 核心痛点 | 期望价值 |
| :--- | :--- | :--- |
| **小说创作者/网文作者** | 希望将文字作品视频化以扩大影响力，但缺乏视频制作技能、时间和资金。**面临数十万至数百万字作品的视频化难题**。 | 通过**分批分段处理**，将超长小说自动转化为系列视频，实现"文改视"的零门槛突破。 |
| **知识付费/教育培训者** | 需要将课程讲稿、书籍内容制作为视频课程，制作过程繁琐耗时。 | 快速生成标准化的教学视频，极大提升课程生产效率，专注内容本身。 |
| **自媒体运营者** | 需要持续产出多平台视频内容，面临创意枯竭和制作成本压力。 | 利用现有文本素材（如公众号文章）快速生成视频，实现内容的多平台、多形态分发。 |
| **视频内容创作者** | 希望尝试AIGC技术提升效率，但技术门槛较高，流程割裂。 | 获得一个集成化、自动化的AIGC视频生产工具，简化工作流，探索新内容形式。 |

## 2. 产品流程

### 2.1 核心业务流程（优化版）

```
+----------+     +------------+     +-----------------+     +----------------+     +-----------+
|  用户    |     |   AICG平台  |     |  大模型(火山)   |     |   ASR/合成引擎  |     | 发布平台  |
+----------+     +------------+     +-----------------+     +----------------+     +-----------+
     |                  |                    |                       |                    |
     | 1. 上传文本      |                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  | 2. 快速预分析 & 章节切割 |                    |                    |
     |                  |------------------->|                       |                    |
     |                  |<-------------------|                       |                    |
     |                  |                    |                       |                    |
     | 3. 展示章节列表   |                    |                       |                    |
     |<-----------------|                    |                       |                    |
     |                  |                    |                       |                    |
     | 4. 编辑章节结构  |                    |                       |                    |
     | (重命名/排序)    |                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  |                    |                       |                    |
     | 5. 选择章节解析详情 |                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  | 6. 解析该章节段落与句子 |                       |                    |
     |                  |------------------->|                       |                    |
     |                  |<-------------------|                       |                    |
     |                  |                    |                       |                    |
     | 7. 精细编辑该章内容 |                    |                       |                    |
     |<-----------------|                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  |                    |                       |                    |
     | 8. 确认该章结构   |                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  |                    |                       |                    |
     | 9. 批量选择生成   |                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  | 10. 逐句生成图片&音频 |                       |                    |
     |                  |------------------->|                       |                    |
     |                  |<-------------------|                       |                    |
     |                  |                    |                       |                    |
     |                  | 11. ASR识别时间轴  |                       |                    |
     |                  |------------------------------------------->|                    |
     |                  |<-------------------------------------------|                    |
     |                  |                    |                       |                    |
     |                  | 12. 合成视频(FFmpeg)|                       |                    |
     |                  |-------+            |                       |                    |
     |                  |   13. 逐段/章合成  |                       |                    |
     |                  |<------+            |                       |                    |
     |                  |                    |                       |                    |
     | 14. 预览最终视频 |                    |                       |                    |
     |<-----------------|                    |                       |                    |
     |                  |                    |                       |                    |
     | 15. 发布到平台   |                    |                       |                    |
     |----------------->|                    |                       |                    |
     |                  |                                   16. 调用平台API发布           |
     |                  |--------------------------------------------------------------->|
     |                  |<---------------------------------------------------------------|
     |                  |                    |                       |                    |
```

### 2.2 超长文本处理专项流程

```
+-----------------+     +-----------------+     +-----------------+     +-----------------+
|   上传与预分析   |     |  章节级管理     |     |  按需精细解析    |     |  分批生成发布    |
+-----------------+     +-----------------+     +-----------------+     +-----------------+
          |                      |                      |                      |
          | 1. 上传超长文本      |                      |                      |
          | (支持GB级文件)       |                      |                      |
          |--------------------->|                      |                      |
          |                      |                      |                      |
          | 2. 快速章节切割      |                      |                      |
          | (仅识别章节目录)     |                      |                      |
          |--------------------->|                      |                      |
          |                      |                      |                      |
          | 3. 展示章节列表      |                      |                      |
          | (状态: 待处理)       |                      |                      |
          |<---------------------|                      |                      |
          |                      |                      |                      |
          | 4. 用户按优先级选择章节 |                      |                      |
          |--------------------->|                      |                      |
          |                      |                      |                      |
          | 5. 解析选中章节的详细结构 |                      |                      |
          | (段落->句子)         |                      |                      |
          |-------------------------------------------->|                      |
          |                      |                      |                      |
          | 6. 精细编辑与确认    |                      |                      |
          | (可标记忽略内容)     |                      |                      |
          |<--------------------------------------------|                      |
          |-------------------------------------------->|                      |
          |                      |                      |                      |
          | 7. 分批生成视频      |                      |                      |
          | (支持批量操作)       |                      |                      |
          |------------------------------------------------------------------>|
          |                      |                      |                      |
          | 8. 分批发发布        |                      |                      |
          | (按完成顺序)         |                      |                      |
          |------------------------------------------------------------------>|
```

## 3. 功能需求详述

### 3.1 模块一：用户与项目管理

| 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- |
| **用户注册/登录** | 支持邮箱/手机号注册和登录。 | 高 |
| **项目管理** | 用户可创建、命名、描述、查看和删除视频生成项目。每个项目关联一个源文本。 | 高 |
| **项目仪表盘** | 展示所有项目列表及其状态（如：编辑中、生成中、已完成、失败）。**增加大文件处理状态提示**。 | 高 |
| **批量项目管理** | **【新增】** 支持批量创建项目（如按章节自动拆分），批量状态监控。 | 中 |

### 3.2 模块二：AI服务配置

| 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- |
| **API密钥管理** | 用户可在"设置"中添加、编辑、删除和启用/禁用多个火山引擎（或其他供应商）的API密钥。 | 高 |
| **密钥选择器** | 在启动视频生成任务时，用户可以从已配置的可用密钥中选择一个使用。 | 高 |
| **用量统计** | 展示各API密钥的调用次数和费用消耗情况（基础版）。**增加大文本处理的用量预估**。 | 中 |
| **配额管理** | **【新增】** 针对超长文本处理，设置单次处理字数上限，避免意外消耗。 | 中 |

### 3.3 模块三：文本解析与编辑（完全重设计）

| 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- |
| **大文本上传优化** | **【优化】** 支持GB级别文本文件，提供上传进度条，支持断点续传。上传后立即显示文件基本信息（字数、预估章节数）。 | 高 |
| **智能章节切割** | **【优化】** 专注于章节级切割，快速识别文档的章、节、回等顶层结构，生成章节列表。 | 高 |
| **章节级管理视图** | **【新增】** 提供专门的章节管理界面，支持：<br> - 章节列表浏览与搜索<br> - 批量选择与操作<br> - 拖拽调整顺序<br> - 章节重命名<br> - 状态标识（待解析/可编辑/已确认/生成中） | 高 |
| **按需精细解析** | **【新增】** 用户选择特定章节后，触发该章节的段落和句子级解析。避免一次性解析整个超长文档。 | 高 |
| **分章编辑器** | **【优化】** 进入单章编辑模式，提供：<br> - 段落/句子树状视图<br> - 文本内容直接编辑<br> - 段落合并/拆分<br> - 忽略标记（不参与视频生成的内容）<br> - 撤销/重做功能 | 高 |
| **分步确认机制** | **【新增】** 两级确认流程：<br> 1. 章节结构确认（宏观）<br> 2. 章节内容确认（微观）<br> 确认后的章节锁定结构，可进入生成队列。 | 高 |
| **进度保存与恢复** | **【新增】** 所有编辑操作自动保存，支持浏览器刷新后恢复工作状态。 | 高 |
| **批量操作支持** | **【新增】** 支持批量解析章节详情、批量确认结构、批量加入生成队列。 | 高 |

### 3.4 模块四：视频生成与合成

| 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- |
| **分章生成触发** | **【优化】** 支持多种生成模式：<br> - 单章生成<br> - 批量章节生成<br> - 按顺序自动连续生成 | 高 |
| **AI生成图片与音频** | 系统后台异步执行：<br> 1. 对每个**句子**，调用文生图模型生成对应图片。<br> 2. 对每个**段落**，调用TTS模型生成完整音频。 | 高 |
| **时间轴识别** | 调用ASR模型，对段落音频进行分析，识别出每个**句子**在音频中的开始和结束时间点。 | 高 |
| **视频合成引擎** | 使用FFmpeg：<br> 1. **句子视频合成**：根据时间轴，将对应图片与音频片段合成一个短视频。<br> 2. **段落视频合成**：将该段落的所有句子视频按顺序拼接。<br> 3. **章节视频合成**：将该章节的所有段落视频按顺序拼接，生成最终的长视频文件。 | 高 |
| **生成队列管理** | **【新增】** 提供任务队列视图，显示所有生成任务的状态、进度、预计完成时间。支持暂停、继续、取消任务。 | 高 |
| **生成进度与状态** | **【优化】** 在项目中实时显示每个章节的生成进度（如：排队中、图片生成中、音频生成中、合成中、完成/失败）。**增加大章节的进度细分**。 | 高 |
| **视频预览与下载** | **【优化】** 生成完成后，用户可以在线预览生成的章节视频，并下载到本地。**支持批量下载多个章节视频**。 | 高 |
| **生成资源管理** | **【新增】** 提供生成资源（图片、音频）的管理功能，支持重新生成失败的部分，避免全部重做。 | 中 |

### 3.5 模块五：内容分发

| 功能点 | 描述 | 优先级 |
| :--- | :--- | :--- |
| **发布平台绑定** | 在用户设置中，支持授权绑定B站和YouTube账号（通过OAuth等标准协议）。 | 高 |
| **分批发布策略** | **【新增】** 支持多种发布模式：<br> - 单视频发布<br> - 批量发布已完成视频<br> - 定时发布<br> - 按序列发布（保持章节顺序） | 高 |
| **发布模板** | **【新增】** 支持创建发布模板，自动生成视频标题、描述、标签等。支持变量替换（如章节名、序号）。 | 中 |
| **发布记录** | **【优化】** 记录每次发布的详情，包括平台、视频链接、发布时间和状态。**增加批量发布任务管理**。 | 中 |
| **发布数据分析** | **【新增】** 基础发布效果统计（观看量、点赞等），帮助优化后续内容生成。 | 低 |

## 4. 非功能性需求

### 4.1 性能需求

| 指标 | 要求 |
| :--- | :--- |
| **大文本处理** | - 支持GB级别文本文件上传（>1GB）<br> - 章节切割：百万字文档在30秒内完成初步章节识别<br> - 段落句子解析：万字章节在20秒内完成解析<br> - 支持并行解析多个章节 |
| **视频生成** | - 图片生成：平均3-5秒/张<br> - 音频生成：平均2-4秒/段落<br> - 视频合成：每分钟视频约1-2分钟合成时间<br> - 支持多个章节并行生成 |
| **系统响应** | - 页面加载：核心页面首屏加载时间低于3秒<br> - 操作响应：95%的用户操作在2秒内有反馈<br> - 大文件上传：支持断点续传，进度实时显示 |

### 4.2 可用性需求

| 维度 | 要求 |
| :--- | :--- |
| **交互设计** | - 渐进式交互：引导用户"先宏观后微观"<br> - 状态可视化：清晰的状态标识和进度反馈<br> - 批量操作：所有列表界面支持批量选择<br> - 操作撤销：关键操作支持撤销/重做 |
| **用户引导** | - 新用户引导：超长文本处理专项引导<br> - 操作提示：复杂操作提供工具提示和示例<br> - 帮助文档：超长文本处理最佳实践文档 |
| **无障碍设计** | - 支持键盘导航<br> - 色彩对比度符合WCAG标准<br> - 重要状态同时提供图标和文字说明 |

### 4.3 可靠性需求

| 方面 | 要求 |
| :--- | :--- |
| **系统可用性** | - 系统年可用性不低于99.9%<br> - 核心功能故障自动切换备用服务<br> - 数据库定期备份与快速恢复 |
| **任务可靠性** | - 文本解析任务支持断点续传<br> - 视频生成任务支持从失败步骤继续<br> - 生成队列持久化，系统重启后恢复 |
| **数据完整性** | - 用户操作实时自动保存<br> - 文件上传支持MD5校验<br> - 生成资源完整性验证 |

### 4.4 安全性需求

| 层面 | 要求 |
| :--- | :--- |
| **数据安全** | - 用户API密钥AES加密存储<br> - 用户文件传输HTTPS加密<br> - 生成视频访问权限控制<br> - 敏感操作二次验证 |
| **业务安全** | - 单用户并发任务数限制<br> - 单次处理字数上限控制<br> - API调用频率限制<br> - 费用消耗预警机制 |
| **系统安全** | - 防范常见Web攻击（XSS、CSRF、SQL注入）<br> - 定期安全漏洞扫描<br> - 操作日志审计追踪 |

### 4.5 可扩展性需求

| 扩展方向 | 要求 |
| :--- | :--- |
| **业务扩展** | - 插件化文本解析器架构<br> - 可配置的视频生成流水线<br> - 多AI供应商热插拔支持<br> - 分发渠道快速接入框架 |
| **技术扩展** | - 微服务架构，支持水平扩展<br> - 任务队列分布式部署<br> - 存储系统弹性扩容<br> - CDN加速支持 |

## 5. 未来版本规划

### 5.1 V1.1版本（近期）

- **超长文本体验优化**
  - 章节解析优先级设置
  - 智能内容过滤（自动识别并标记无关内容）
  - 跨章节内容连续性检查

- **生成质量提升**
  - 增加更多视频风格和AI画风选项
  - 优化ASR时间轴准确性
  - 增加简单的视频编辑功能（如替换某张图片、背景音乐）

### 5.2 V1.5版本（中期）

- **协作与管理**
  - 项目管理与团队协作功能
  - 更详细的用量分析和成本报表
  - 项目模板和快速复制

- **智能处理增强**
  - AI辅助内容摘要和亮点提取
  - 自动生成视频封面和缩略图
  - 多语言内容支持

### 5.3 V2.0版本（远期）

- **技术架构升级**
  - 支持多模态提示（用户可上传参考图影响视频风格）
  - AI生成视频（非图片拼接）的集成
  - 实时协作编辑功能

- **生态建设**
  - 构建内容展示和社区功能
  - 创作者变现功能
  - 第三方插件市场

## 6. 附录

### 6.1 超长文本处理最佳实践

1. **预处理建议**
   - 确保源文本格式规范，章节标记清晰
   - 建议单章节字数控制在5000字以内以获得最佳效果
   - 提前删除无关的版权声明、广告等内容

2. **生成策略**
   - 优先生成关键章节进行效果验证
   - 批量生成时注意API配额和费用控制
   - 利用忽略标记功能过滤过渡性内容

3. **发布规划**
   - 制定章节发布序列计划
   - 利用定时发布功能保持内容更新节奏
   - 分析发布数据优化后续内容生成

### 6.2 技术架构建议

- **前端架构**：采用React/Vue等现代框架，实现组件化编辑界面
- **后端架构**：微服务架构，文本解析、视频生成、分发等服务独立部署
- **任务队列**：Celery/RabbitMQ等支持优先级和持久化的队列系统
- **存储方案**：对象存储用于大文件，Redis用于缓存和会话管理
- **监控体系**：全链路监控，特别是大文本处理各环节的性能监控

---

**文档版本：V1.1**  
**最后更新：2025-11-06**  
**下一版本规划评审日期：2025-12-06**